<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>連接資料庫介面</title>
    <link rel="stylesheet" href="list.css">

</head>

<body>
    <nav>
        <!-- 左上半部欄位  -->
        <div class="logo-name">
            <div class="logo-image">
                <img src="close.png" alt="">
            </div>

            <span class="logo_name">操作功能</span>
        </div>

        <hr>
        <!-- 左下半部欄位 -->
        <div class="menu-items">
            <ul class="nav-links">
                <li><a href="#" onclick="clearAll() , showAllItem()">
                        <i><img src="request40.png" alt=""></i>
                        <span class="link-name">顯示店家</span>
                    </a></li>
                <li><a href="#" onclick="clearAll() , showAddItem()">
                        <i><img src="request40.png" alt=""></i>
                        <span class="link-name">新增店家</span>
                    </a></li>
                <li><a href="#" onclick="clearAll() , showDeleteItem()">
                        <i><img src="keyrecord40.png" alt=""></i>
                        <span class="link-name">刪除店家</span>
                    </a></li>
                <li><a href="#" onclick="clearAll() , showUpdateItem()">
                        <i><img src="keyrecord40.png" alt=""></i>
                        <span class="link-name">修改店家</span>
                    </a></li>
            </ul>
        </div>
    </nav>
    <section class="board">
        <!-- 右上半部欄位  -->
        <div class="top">
            <i class="sidebar-toggle"><img src="left.png" class="leftArrow" id="leftArrow"></i>
            <img src="user.jpg" alt="">

        </div>
        <!-- 右下半部欄位  -->
        <div class="board-content">
            <!-- 顯示資料 -->
            <div class="allitem" id="allitem">
                <h1>顯示資料</h1>
                <button onclick="showRestaurant()">顯示全部店家</button>
                <div class="allContainer">

                    <div class="title">
                        <p id="restaurantName">餐廳名稱</p>
                        <p>餐廳網站</p>
                        <p>餐廳電話</p>
                        <p>餐廳地址</p>
                        <p>餐廳營業時間</p>
                    </div>
                    <hr>
                    <div class="allItemtext" id="allItemtext">
                        <p id="Allname"></p>
                        <p id="Allwebsite"></p>
                        <p id="Allphone"></p>
                        <p id="Alladdress"></p>
                        <p id="Allbusiness_hour"></p>
                        <!-- <br> -->
                    </div>

                    <!-- <button>確認新增</button> -->
                </div>

            </div>


            <!-- 新增資料 -->
            <div class="additem" id="additem">
                <h1>新增資料</h1>
                <div class="addContainer">

                    <form action="insert.php" method="POST">
                        <div class="title">
                            <p>餐廳名稱</p>
                            <p>餐廳網站</p>
                            <p>餐廳電話</p>
                            <p>餐廳地址</p>
                            <p>餐廳營業時間</p>
                        </div>
                        <hr>
                        <div class="text">
                            <p><input type="text" name="name"></p>
                            <p><input type="text" name="website"></p>
                            <p><input type="text" name="phone"></p>
                            <p><input type="text" name="address"></p>
                            <p><input type="text" name="business_hour"></p>
                        </div>
                        <input type="submit" name="submit" value="新增" class="go">
                    </form>
                    <!-- <button>確認新增</button> -->
                </div>

            </div>


            <!-- 刪除項目 -->
            <div class="deleteitem" id="deleteitem">
                <h1>刪除餐廳</h1>
                <form action="deleteRestaurant.php" method="POST">
                    <div class="deleteContainer">
                        <div class="title">
                            <!-- 標題 -->
                            <p>餐廳名稱</p>
                        </div>
                        <hr>
                        <div class="text">
                            <!-- 內容 -->
                            <p><input type="text" placeholder="八方雲集"></p>
                        </div>
                    </div>
                    <button type="submit">確認刪除</button>
                </form>
            </div>

            <!-- 修改項目 -->
            <div class="updateitem" id="updateitem">
                <h1>修改餐廳營業時間</h1>
                <form action="insert.php" method="POST"></form>
                    <div class="updateContainer">
                        <div class="title">
                            <!-- 標題 -->
                            <p>餐廳名稱</p>
                            <p>餐廳營業時間</p>
                        </div>
                        <hr>
                        <div class="text">
                            <!-- 內容 -->
                            <p><input type="text" name="name"></p>
                            <p><input type="text" name="business_hour"></p>
                        </div>
                    </div>
                    <button type="submit">確認更改</button>
                </form>
                
            </div>
        </div>

    </section>


    <script>
        const body = document.querySelector("body"),
            sidebar = body.querySelector("nav"),
            leftArrow = document.getElementById("leftArrow");
        sidebarToggle = body.querySelector(".sidebar-toggle");

        sidebarToggle.addEventListener("click", () => {
            sidebar.classList.toggle("close");
            if (sidebar.classList.contains("close")) {
                localStorage.setItem("status", "close");
                leftArrow.classList.add("show");
            } else {
                localStorage.setItem("status", "open");
                leftArrow.classList.remove("show");
            }
        })

        // 當點擊左側選當後在右側顯示
        let allitem = document.getElementById("allitem");
        let additem = document.getElementById("additem");
        let deleteitem = document.getElementById("deleteitem");
        let updateitem = document.getElementById("updateitem");

        function clearAll() {
            allitem.classList.remove("show");
            additem.classList.remove("show");
            deleteitem.classList.remove("show");
            updateitem.classList.remove("show");

        }
        function showAllItem() {
            allitem.classList.add("show");
        }

        function showAddItem() {
            additem.classList.add("show");
        }
        function showDeleteItem() {
            deleteitem.classList.add("show");
        }
        function showUpdateItem() {
            updateitem.classList.add("show");
        }


        function showRestaurant() {
            document.getElementById("Allname").innerText = "";
            document.getElementById("Allwebsite").innerText = "";
            document.getElementById("Allphone").innerText = "";
            document.getElementById("Alladdress").innerText = "";
            document.getElementById("Allbusiness_hour").innerText = "";


            // 使用AJAX呼叫PHP檔案
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    // 更新餐廳名稱

                    var total = this.responseText.split("+");
                    var count = total[0];
                    var data = total[1].split("\n");
                    // 將數據分別設定給各個對應的 HTML 元素
                    
                    for (var i = 0; i < count; i++) {
                        var temp = data[i].split("|");
                        document.getElementById("Allname").innerText += (temp[0] || "null") + "\n";
                        document.getElementById("Allwebsite").innerText += (temp[1] || "null") + "\n";
                        document.getElementById("Allphone").innerText += (temp[2] || "null") + "\n";
                        document.getElementById("Alladdress").innerText += (temp[3] || "null") + "\n";
                        document.getElementById("Allbusiness_hour").innerText += (temp[4] || "null") + "\n";
                        // document.getElementById("wrap") = "wr";
                    }
                }
            };
            xhr.open("GET", "showAllRestaurant.php", true);
            xhr.send();
        }
    </script>
</body>

</html>